<%- include('../partials/header') %>

<h1><%= experience.title %></h1>


<div>
  <span class="tag"><%= experience.mood %></span>
  <span class="tag"><%= experience.music %></span>
</div>

<p><strong>Day:</strong> <%= experience.dayOfWeek %></p>
<p><strong>Ambiance:</strong> <%= experience.ambiance %></p>

<% if (experience.playlistUrl) { %>
  <p><strong>Playlist:</strong> 
    <a href="<%= experience.playlistUrl %>" target="_blank">Listen</a>
  </p>
<% } %>

<hr />
<h2>Menu</h2>

<% if (experience.meals.length > 0) { %>
  <ul>
    <% experience.meals.forEach(meal => { %>
      <li>
        <strong><%= meal.name %></strong>: <%= meal.description %>
      </li>
    <% }) %>
  </ul>
<% } else { %>
  <p>No meals added yet.</p>
<% } %>


<div style="margin-top: 2rem;">
  <a href="/experiences/<%= experience._id %>/menu/edit">
    <button>Edit Menu</button>
  </a>
</div>

<hr />
<h2>Add a Meal</h2>

<form action="/experiences/<%= experience._id %>/meals" method="POST">
  <label>Meal Name:</label>
  <input type="text" name="name" required />

  <label>Description:</label>
  <input type="text" name="description" required />

  <button type="submit">Add Meal</button>
</form>

<hr />

<div class="experience-footer">
  <form 
    action="/experiences/<%= experience._id %>?_method=DELETE" 
    method="POST"
  >
    <button 
      type="submit" 
      onclick="return confirm('Are you sure you want to delete this experience?')"
      class="danger"
    >
      Delete This Experience
    </button>
  </form>

  <a href="/experiences" class="back-link">‚Üê Back to All Experiences</a>
</div>


<%- include('../partials/footer') %>
